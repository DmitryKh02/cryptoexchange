# Криптобиржа 
Цель данного проекта: реализация упрощенного функционала биржи.
## Структура проекта
### 1) RESTfull API service (Java)
### 2) PostgreSQL
Проект был выполнен в IntelliJ IDEA

## №1. RESTfull API service на Java
Рассмотрим подробнее основную реализацию проекта. В неё входят:
### А) Стек технологий
### Б) Основные сущности
### В) Компоновка и реализация аспектов

### Стек технологий
Spring framework - основа всего проекта (без него никуда)

I. JPA - технология, для удобного взаимодействия с реляционными БД. 
Я не выбрал JDBC потому, что JPA является более высокоуровневым стандартом (более удобным, проще говоря).

II. PostgreSql - библиотека для простого взаимодействия с БД.

III. Lombok - специальная библиотека языка Java, 
предоставляющая возможности сокращения кода и расширения языка (как минимум меньше проблем с гетерами и сетерами)

### Основные сущности
Основная идея понятна - необходим функционал биржи. Я разбил эту задачу на подзадачи, а именно
* Пользователь
* Кошелек пользователя
* Курс валют
* Транзакции

Пользователь: сущность с никнеймом, почтой и УНИКАЛЬНЫМ ключом доступа.

Кошелек пользователя: сущность, которая хранит сбережения пользователя 
(rub, ton, btc) и связывается с пользователем по средствам ключа (один-к-одному)

Курс валют: сущность, которая хранит отношение трех валют друг к другу

Транзакция: сущность, которая хранит дату транзакции и код пользователя, совершившего эту транзакцию

### Компоновка и реализация аспектов
Все сущности были представлены в виде реализации классов с аннотацией @Entity
т.е. объекты, взаимодействующие с базой данных.

Для каждой из них был реализован свой controller, repository, service и его имплементация.

Если подробнее:
* Controller - точка входа в программу, которая обрабатывает HTTP запрос и возвращает ответ (в нашей задаче только GET и POST запросы)
* Service и имплементация - основная бизнес-логика
* Repository - взаимодействие с базой данных (расширяет JPA)

#### Controller
Использовались аннотации @RestController для обозначения класса контроллера, работающая со службами REST
и @RequestMapping для сопоставления запросов с методами обработчиков MVC и REST 
(MVC отвечает за маршрутизацию к обработчикам).

#### Service 
Представлен в виде интерфейсов. Представляет собой подтип класса @Component,
что позволяет находить и использовать Bean автоматически.

ServiceImpl содержит полную реализацию переопределенных функций(@Override) и вспомогательные функции
необходимые для корректной работы приложения.

#### Repository
Тоже представлен в виде интерфейса. Предоставляет механизм взаимодействия с БД, а 
именно: хранение, извлечение, обработка, удаление и тд.

## PostgreSQL
Использовались 4 таблицы:
* Client
* Wallet
* Rates
* Transaction

### Client
* id - primary key
* key - уникальный ключ доступа пользователя
* username - логин или имя пользователя
* email - почта

Генерация ключа происходит автоматически и проходит проверку на уникальность. 
Данные для администратора находятся в файле properties и заносятся вручную в таблицу, после её создания.
Проверка на возможность совершения той или иной операции происходит после получения ключа.

### Wallet
* id - primary key
* card_number - номер карты, на которую будут выводиться деньги
* wallet_number - номер кошелька, на которую будут выводиться деньги
* key - уникальный кл.ч пользователя
* rub,ton,btc - деньги на счету

Запись в эту таблицу создается автоматически каждый раз при создании пользователя и
столбец key заполняется в соответствии с таким же клюем у объекта пользователя.
Значения столбцов rub, ton, btc по умолчанию равны 0.

### Rates
* id - primary key
* rub, ton, btc - представляют собой отношение друг к другу

Эта таблица создается один раз и вносится только одна запись. 
Её можно менять, но удалять или добавлять нельзя. 
Запись представляет собой одну ведущую валюту равную 1 
и две зависимые валюты с коэффициентами равными их эквивалентам.

Пример: TON = 1, RUB = 180, BTC = 0.000096. Здесь TON - ведущая валюта, BTC и RUB - зависимые.

### Transaction
* id - primary key
* key - ключ пользователя, совершившего транзакцию
* date - дата транзакции (без времени!)

Под транзакцией я понимаю любые операции с денежными средствами, связанные с кошельком.
Т.е. вывод, пополнение, обмен.

## Что получилось, а что нет?
### Получилось
* Создать рабочее приложение имеющий полный требуемый функционал
* Подключить базу данных и взаимодействовать с ней
* Использовать возможности Spring, а не изобретать велосипед (ну или по крайней мере не везде изобретать =) )
* Написать чистый и понятный код для читателя

### Не получилось
* Сделать другие дополнительные задания
* Получилась немного избыточная база данных, которую можно оптимизировать.
* Написал лишние функции, которые точно можно упростить с использованием средств фреймворка Spring (но я пока не знаю, как это сделать)
* Всегда можно написать лучше!


